<html>
<head>
<title>Design: CLRA Struts</title>
</head>
<body>
Nouns:<ul>
<li>Model (business logic)</li><p></p>
<li>View (JSP's)</li><p></p>
<li>Controller (org.apache.struts.action.ActionServlet). The controller bundles and routes HTTP requests to other objects in the framework, including JavaServer Pages.</li><p></p>
<li>Action (org.apache.struts.action.Action). An Action is an adapter between the contents of an incoming HTTP request and the corresponding business logic that should be executed to process this request. The action object can handle the request and respond to the client (usually a Web browser), or indicate that control should be forwarded to another action. For example, if a login succeeds, a loginAction object may wish to forward control to a mainMenu action.</li><p></p>
<li>Action mappings (org.apache.struts.action.ActionMapping). Action mappings are created when a controller is initialized. Action mappings are parsed from a configuration resource file.  The controller uses these mappings to turn HTTP requests into application actions. At a minimum, an action mapping must specify (1) a request path and (2) the object type to act upon the request.</li><p></p>
<li>JavaBeans. In a Struts application, most of the business logic can be represented using JavaBeans. JavaBeans can also be used to manage input forms. A key problem in designing Web applications is retaining and validating what a user has entered between requests. With Struts, you can easily store the data for a input form in a form bean. The bean is saved in one of the standard, shared context collections, so that it can be used by other objects, especially the action object.</li><p></p></ul>
<p>Flow control</p>
<p>Action objects are linked to the application's controller, and so have access to that servlet's methods. When forwarding control, an object can indirectly forward one or more shared objects, including JavaBeans, by placing them in one of the standard collections shared by Java servlets.</p>
<p>An action object can create a shopping cart bean, add an item to the cart, place the bean in the session collection, and then forward control to another action -- that may use a JSP to display the contents of the user's cart. Since each client has their own session, they will each also have their own shopping cart.</p>
<p>A form bean can be used by a JSP to collect data from the user ... by an action object to validate the user entered ... and then by the JSP again to re-populate the form fields. In the case of validation errors, Struts has a shared mechanism for raising and displaying error messages.</p>
<p>Struts form bean is defined in the configuration resource and linked to an action mapping using a common property name. When a request calls for an action that uses a form bean, the controller servlet either retrieves or creates the form bean, and passes it to the action object. The action object can then check the contents of the form bean before its input form is displayed, and also queue messages to be handled by the form. When ready, the action object can return control with a forwarding to its input form, usually a JSP. The controller can then respond to the HTTP request and direct the client to the Java Server Page.</p>
<p>Struts framework includes custom tags that can automatically populate fields from a form bean. The only thing most JavaServer Pages need to know about the rest of the framework is the proper field names and where to submit the form. Components like the messages set by the action object can be output using a single custom tag. Other application-specific tags can also be defined to hide implementation details from the JSPs.</p>
<p>custom tags in the Struts framework are designed to use the internationalization features built into the Java platform. All the field labels and messages can be retrieved from a message resource, and Java can automatically provide the correct resource for a client's country and language. To provide messages for another language, simply add another resource file.  Internationalism aside, other benefits to this approach are consistent labeling between forms, and the ability to review all labels and messages from a central location.</p>
<p>the simplest applications, an action object can handle the business logic associated with a request.  However, in most cases, an action object should pass the request to another object, usually a JavaBean.  To allow resuse on other platforms, business-logic JavaBeans should not refer to any Web application objects. The action object should translate needed details from the HTTP request and pass those along to the business-logic beans as regular Java variables.</p>
<p>a database application, the business-logic beans might connect to and query the database and return the result set back to the action's servlet ... to be stored in a form bean ... and then displayed by the JSP.  Neither the action's servlet nor the JSP need to know (or care) where the result set comes from.</p>
</body>
</html>

